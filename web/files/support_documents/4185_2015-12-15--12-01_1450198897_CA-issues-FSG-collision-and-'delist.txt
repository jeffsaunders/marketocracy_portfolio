FSG	
CA issues FSG delist.txt
date:  12/13/15 
ticker:  FSG

yahoo:  nothing

quantum:
FactorShares 2X: Gold Bull/S&P500 Bear Fund
Ticker Symbol: FSG*     CUSIP: 30304T106     Exchange: NYSEA
Security Type:   Index ETF  ---  ETF SubType:   Speciality Index ETF
* NOTE: This security is no longer trading as of 11/22/13

Company's Online Profile
FUND DESCRIPTION:  FactorShares 2X: Gold Bull/S&P500 Bear Fund is an exchange-traded index fund or Index ETF which is a separate investment portfolio of FactorShares. INVESTMENT OBJECTIVE: The FactorShares 2X: Gold Bull/S&P500 Bear seeks to track investment results, for a single day only, not for longer periods, approximately +200% of the daily return of the S&P Gold â€“ Equity Spread Total Return Index, before fees and expenses, by primarily establishing a leveraged long position in Gold Futures and a leveraged short position in the E-mini S&P 500 Stock Price Index Futures. Leveraged funds are not suitable for all investors and should be utilized only by investors who understand leverage risk, consequences of seeking daily leveraged investment results and intend to actively monitor and manage their investments as frequently as daily. INDEX DESCRIPTION: The S&P Gold - Equity Spread Total Return Index is a spread index reflecting the difference in daily return between the gold and U.S. equity market segments by tracking a long position in the front month Gold Futures and a short position in the front month E-mini S&P 500 Stock Price Index Futures. FUND STRATEGY: In order to pursue its investment objective, the Fund seeks to invest approximately +200% of the value of its Fund Equity (i.e., the estimated net asset value) in the front month Gold Index Futures Contract (or Substitute Futures and/or Financial Instruments). Simultaneously, the Gold Bull/S&P500 Bear Fund seeks to invest approximately -200% of the value of its Fund Equity in the front month Equity Index Futures Contract (or Substitute Futures and/or Financial Instruments). Around the NAV Calculation Time, and in order to continue to pursue its daily investment objective, the Gold Bull/S&P500 Bear Fund seeks to rebalance daily its front month Gold Index Futures Contracts (or Substitute Futures and/or Financial Instruments) to equal approximately +200% of the value of its Fund Equity. Similarly, around the NAV Calculation Time, the Gold Bull/S&P500 Bear Fund seeks to rebalance daily its front month Equity Index Futures Contract (or Substitute Futures and/or Financial Instruments) to equal approximately -200% of the value of its Fund Equity. FUND MANAGEMENT: Factor Capital Management, LLC is the Managing Owner and has exclusive management and control over all aspects of the Fund's business.
Notes:  Nov. 5, 2013 -- Factor Capital Management, LLC, a commodity pool operator (the "Managing Owner"), today announced that it has determined to close each of the Funds. The following table lists the name, ticker symbol and CUSIP number of each Fund: FactorShares 2X: S&P500 Bull/TBond Bear FSE 303046106 FactorShares 2X: TBond Bull/S&P500 Bear FSA 303047104 FactorShares 2X: S&P500 Bull/USD Bear FSU 303048102 FactorShares 2X: Oil Bull/S&P500 Bear FOL 30304P104 FactorShares 2X: Gold Bull/S&P500 Bear FSG 30304T106 The Managing Owner has determined that, in light of current market conditions and as a result of each Fund's asset size, it was advisable to close each Fund. Trading on the NYSE Arca for the shares of each Fund listed above will be suspended prior to the open of business on Friday, November 22, 2013. Shareholders may sell their holdings on or before Thursday, November 21, 2013 and may incur customary brokerage charges. Shareholders who do not sell their holdings on or before November 21, 2013 will receive cash equal to the amount of the net asset value of their shares along with any accrued capital gains and remaining income. Each Fund's net asset value will reflect the costs of closing the Fund as calculated on the liquidation date. The Board of Managers of the Managing Owner has authorized these Fund liquidations.
oursite:
Symbol: FSG	Name: FactorShares 2X: Gold Bull/S&P500 Bear	Price: $5.55
Volume:	Sector: Unclassified	Change:
Short Volume: 0	Style: Unclassified Market Cap : Unclassified Style	Market Cap:
Avg Volume: 0	 Exchange: AMEX	Today: 0.00%
50 Day Ave: $0.00	Year High: $0.00	High:
200 Day Ave: $0.00	Year Low: $0.00	Low:

	attention please:	
 	
This stock has a very low trading volume. Any trades you make with this stock will take a long time to complete.

research  stock info  FSG   
 [NEW QUOTE]       
Corporate Actions for FactorShares 2X: Gold Bull/S&P500 Bear	  December 13, 2015
left curve	  listing changes for FSG	right curve
 	 	
Effective Date	Old Exchange	Old Cod	New Exchange	New Code	Description
Oct 17, 2011	NYSE	UN	AMEX	UA	Change in the exchange that FSG trades on from NYSE to AMEX


Xignite:
http://192.168.111.213/feed/stockLookup.php?symbol=FSG

check MAdmin
Stock:FactorShares 2X: Gold Bull/S&P500 Bear  Symbol:FSG
Date: 12/13/2015

22 users found

1	captlvntr	cuban22	cubs22	jig3378	lossesbigtime	m2filin1	margo222	mikey22	milo222	mjjipo
2	mjjipo8	morgo22	mweigpt	mweir22	mweirich2	nothingmatters	pilt22	win55	winhh	winji
3	winrt33	winsgold	 	 

database
select distinct stockkey from mstockalias where symbol= 'FSG';  
> Row 1:
>   STOCKKEY = X'f26b094f4d66ebe5c0a80146'
> Row 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'

There are two we have a collision
************************************************************************************
> FSG 1:
>   STOCKKEY = X'f26b094f4d66ebe5c0a80146'
list date: 2011-02-24
mtickets:   60 all member generated 
COMPANYID = 20121
************************************************************************************
select * from mstock where primarykey=X'f26b094f4d66ebe5c0a80146';
> Row 1:
>         IDENTITYKEY = X'243a33d94eb47581c0a8013c'
>                NAME = NULL
>          PRIMARYKEY = X'f26b094f4d66ebe5c0a80146'
>              SYMBOL = NULL
>           COMPANYID = 20121
>   WINDOWIDENTITYKEY = NULL

select * from mstockalias where stockkey=X'f26b094f4d66ebe5c0a80146'     order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-02-24 00:00:00.000000'
>    EXCHANGEKEY = X'9d5b2f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'f26c094f4d66ebe5c0a80146'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
	select * from mcorporateaction where aliaskey=X'f26c094f4d66ebe5c0a80146';
> Row 1:
>              ALIASKEY = X'f26c094f4d66ebe5c0a80146'
>   BB_ACTIONDICTIONARY = CP_EXCH|UP|CP_TKR|FSG|CP_SEC_TYP|42|CP_NOTES|N.A.
>         BB_ACTIONFLAG = N
>           BB_ACTIONID = 52241901
>     BB_ACTIONMNEMONIC = LIST
>          BB_COMPANYID = 24047977
>        BB_COMPANYNAME = FactorShares 2X: Gold Bull/S&P500 Bear
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2011-02-24 00:00:00.000000'
>         BB_IDENTIFIER = FSG     US Equity
>             BB_ISSUED = TIMESTAMP '2011-02-22 00:00:00.000000'
>          BB_NUMFIELDS = 4
>              BB_RCODE = 0
>              BB_SECID = FSG
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 60000
>            BB_UPDATED = TIMESTAMP '2011-02-22 00:00:00.000000'
>            PRIMARYKEY = X'5269714f4d64480fc0a80146'
>               VERSION = NULL

> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-10-17 00:00:00.000000'
>    EXCHANGEKEY = X'9d592f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'243a33d94eb47581c0a8013c'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
	select * from mcorporateaction where aliaskey=X'243a33d94eb47581c0a8013c';
> Row 1:
>              ALIASKEY = X'243a33d94eb47581c0a8013c'
>   BB_ACTIONDICTIONARY = CP_OLD_EXCH|UN|CP_NEW_EXCH|UA|CP_NOTES|N.A.
>         BB_ACTIONFLAG = 0
>           BB_ACTIONID = 20111104:073009
>     BB_ACTIONMNEMONIC = CHG_LIST
>          BB_COMPANYID = 0
>        BB_COMPANYNAME = 0
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2011-10-17 00:00:00.000000'
>         BB_IDENTIFIER = FSG     UN Equity
>             BB_ISSUED = TIMESTAMP '2011-10-17 00:00:00.000000'
>          BB_NUMFIELDS = NULL
>              BB_RCODE = 0
>              BB_SECID = FSG
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 0
>            BB_UPDATED = TIMESTAMP '2011-10-17 00:00:00.000000'
>            PRIMARYKEY = X'243433d94eb47581c0a8013c'
>               VERSION = NULL


	select count(*) from mticket where stockkey=X'f26b094f4d66ebe5c0a80146';
	> Row 1:
	>   _C001 = 60.000000
	select distinct sourcekey from mticket where stockkey=X'f26b094f4d66ebe5c0a80146';
	> Row 1:
	>   SOURCEKEY = NULL
	select count(*) from mticket where sourcekey is not null and stockkey=X'f26b094f4d66ebe5c0a80146';
	> Row 1:
	>   _C001 = 0.000000
	all member generated tickets 
is anyone short?
look for shorts in member's active, long funds
select fundkey from mposition where stockkey=X'f26b094f4d66ebe5c0a80146'  and totalshares < 0;
if there are some, then do this
select active, kindkey, primarykey, symbol from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'f26b094f4d66ebe5c0a80146'  and totalshares < 0);
no shorts

************************************************************************************
> FSG 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'
list date:  2011-02-24   - same as FSG-1
mtickets:  110 all member generated 
COMPANYID = 20135
************************************************************************************
select * from mstock where primarykey=X'f2a8094f4d66ebfbc0a80146';
> Row 1:
>         IDENTITYKEY = X'f2a9094f4d66ebfbc0a80146'
>                NAME = NULL
>          PRIMARYKEY = X'f2a8094f4d66ebfbc0a80146'
>              SYMBOL = NULL
>           COMPANYID = 20135
>   WINDOWIDENTITYKEY = NULL

select * from mstockalias where stockkey=X'f2a8094f4d66ebfbc0a80146'     order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-02-24 00:00:00.000000'
>    EXCHANGEKEY = X'9d5b2f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'f2a9094f4d66ebfbc0a80146'
>       STOCKKEY = X'f2a8094f4d66ebfbc0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
	select * from mcorporateaction where aliaskey=X'f2a9094f4d66ebfbc0a80146';
> Row 1:
>              ALIASKEY = X'f2a9094f4d66ebfbc0a80146'
>   BB_ACTIONDICTIONARY = CP_EXCH|UP|CP_TKR|FSG|CP_SEC_TYP|66|CP_NOTES|N.A.
>         BB_ACTIONFLAG = U
>           BB_ACTIONID = 52241901
>     BB_ACTIONMNEMONIC = LIST
>          BB_COMPANYID = 24047977
>        BB_COMPANYNAME = FactorShares 2X: Gold Bull/S&P500 Bear
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2011-02-24 00:00:00.000000'
>         BB_IDENTIFIER = FSG     US Equity
>             BB_ISSUED = TIMESTAMP '2011-02-22 00:00:00.000000'
>          BB_NUMFIELDS = 4
>              BB_RCODE = 0
>              BB_SECID = FSG
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 60000
>            BB_UPDATED = TIMESTAMP '2011-02-24 00:00:00.000000'
>            PRIMARYKEY = X'77d604f14d66eb29c0a80146'
>               VERSION = NULL




	select count(*) from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146';
	> Row 1:
	>   _C001 = 110.000000
	select distinct sourcekey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146';
	> Row 1:
>   SOURCEKEY = NULL
there are all member generate as well 
is there anyone who is short
look for shorts in member's active, long funds
select fundkey from mposition where stockkey=X'f2a8094f4d66ebfbc0a80146'  and totalshares < 0;
if there are some, then do this
select active, kindkey, primarykey, symbol from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'f2a8094f4d66ebfbc0a80146'  and totalshares < 0);
no shorts 

We're going to eliminate FSG-2  let's see who holds it now
/Marketocracy/Scripts/build/bin/findFundsForStock.py f2a8094f4d66ebfbc0a80146 2015-12-13
6D4556364DEB261AC0A80134, MMF2, melendezmw, 1570
86B653D54E4DBB75C0A80135, DGN, davidgn, 2000
999D72E04E4EC773C0A80133, JLF, jgohar, 4790
A5AC4A4F4C431B65C0A80134, MMF, melendezmw, 1860
D17B3A794E601BDBC0A80133, BMF, bkneidinger, 300
8C6660794AD74F97C0A80135, cvp, captlvntr, 500
 
let's check a member  melendezmw MMF2
strat
FSG	click me	$34.77	1,570	$54,588.90	6.22%	-$11,459.46	0.00%	-17.35%	-17.35%	Details 
LEDGER
Date	Start	Change	End	Type
Aug 08, 2011		1570	1570	Buy
Total: 1,570
 	 	 
BUYS
Close Date	Quantity	Commission	Net	Price
Aug 8, 2011	1,570	$78.50	$66,048.36	$42.07
 	 	 
SELLS
You have no sells for this position

he holds them but has not sold them


Assessment:
1.  FSG got listed twice on  2011-02-24  same BB_ACTIONID
2.  FSG-1 has 60 mtickets all member generated. has a CHG_LIST CA  we want to keep this ont
3.  FSG-2 has 110 member generated tickets no other CAs  merge these into FSG-1
4.  get the ticketkeys for FSG-2  (the ones we're going to merge/remove)
5.  get the fundkeys from the mtrades
6.  eliminate the mtrades
7.  change the stockkey in the mtickets
8.  tickle the tickets
9.  invalidate the funds
10. check results

#4 get the ticketkeys for FSG-2  (the ones we're going to merge/remove)  
select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146';
there are 100 ticketkeys  save to CA issues FSG ticketkeys.txt
#5  get the fundkeys from the mtrades
select positionkey from mtrade where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146');
select fundkey from mposition where primarykey in (select positionkey from mtrade where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146'));
there are 36
save to CA issues FSG fundkeys.txt
#6 eliminate the mtrades
select count(*) from mtrade where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146');
> Row 1:
>   _C001 = 112.000000
delete from mtrade where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146');


#7.  change the stockkey in the mtickets
> FSG 1:
>   STOCKKEY = X'f26b094f4d66ebe5c0a80146'  <---- keep 
> FSG 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'   <---- remove 

select count(*) from mticket where STOCKKEY = X'f2a8094f4d66ebfbc0a80146';
110 ok this is correct
update mticket set STOCKKEY = X'f26b094f4d66ebe5c0a80146' where STOCKKEY = X'f2a8094f4d66ebfbc0a80146';
checking
select count(*) from mticket where STOCKKEY = X'f2a8094f4d66ebfbc0a80146';
none - good 
select count(*) from mticket where STOCKKEY = X'f26b094f4d66ebe5c0a80146';
> Row 1:
>   _C001 = 170.000000
this is good  60 (original FSG-1) + 110 (from FSG-2)

let's eliminate all trades of FSG-2 
> FSG 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'   <---- remove 
set commit false;

delete from mstock where primarykey=  X'f2a8094f4d66ebfbc0a80146'; 

delete from mwindowstock where stockkey=X'f2a8094f4d66ebfbc0a80146';  

delete from mcorporateaction where aliaskey in (select primarykey from mstockalias where stockkey=X'f2a8094f4d66ebfbc0a80146');

delete from mstockalias where stockkey=X'f2a8094f4d66ebfbc0a80146';  

delete from mtrade where positionkey in (select primarykey from mposition where stockkey=X'f2a8094f4d66ebfbc0a80146');   

delete from mposition where stockkey=X'f2a8094f4d66ebfbc0a80146'; 

delete from morder where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146');

delete from mticketallocation where ticketkey in (select primarykey from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146');

delete from mticket where stockkey=X'f2a8094f4d66ebfbc0a80146';    

delete from GFSPOSITION where stockkey=X'f2a8094f4d66ebfbc0a80146';  

delete from MFUNDINDEXPOSITION where stockkey=X'f2a8094f4d66ebfbc0a80146';  

commit;

set commit true;

select distinct stockkey from mstockalias where symbol='FSG';
> Row 1:
>   STOCKKEY = X'f26b094f4d66ebe5c0a80146'
select * from mstockalias where STOCKKEY = X'f26b094f4d66ebe5c0a80146' order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-02-24 00:00:00.000000'
>    EXCHANGEKEY = X'9d5b2f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'f26c094f4d66ebe5c0a80146'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-10-17 00:00:00.000000'
>    EXCHANGEKEY = X'9d592f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'243a33d94eb47581c0a8013c'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

good - we have only one remaining FSG
tickle the tickets
put them into ticketstotickle 
/Marketocracy/bin/dbtool ticklebyticket -ticketList ticketstotickle
>>>> dbtool started at 2015-12-13 09:56:46 -0500
<<<< dbtool finished at 2015-12-13 09:59:36 -0500

invalidate funds

ok these should be up to date
let's reprice on the new site 

let's check prices
companyID  FSG-1  the one we've kept
> FSG 1:
>   STOCKKEY = X'f26b094f4d66ebe5c0a80146'
list date: 2011-02-24
mtickets:   60 all member generated 
COMPANYID = 20121
select max(daynumber) where COMPANYID = 20121;

companyID  FSG-2  the one we're deleting
> FSG 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'
list date:  2011-02-24   - same as FSG-1
mtickets:  110 all member generated 
COMPANYID = 20135
select max(daynumber) where COMPANYID = 20135;

***************
Ok - I am ready to process the delist 

check for unapplied CAs in the database

select * from mcorporateaction where aliaskey is null and BB_SECID='FSG'  order by BB_EFFECTIVE;
> Row 1:
>              ALIASKEY = NULL
>   BB_ACTIONDICTIONARY = CP_EXCH|UP|CP_TKR|FSG|CP_DELIST_REASON|26|CP_NOTES|N.A.
>         BB_ACTIONFLAG = N
>           BB_ACTIONID = 83643789
>     BB_ACTIONMNEMONIC = DELIST
>          BB_COMPANYID = 24047977
>        BB_COMPANYNAME = FactorShares 2X: Gold Bull/S&P500 Bear
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2013-11-22 00:00:00.000000'
>         BB_IDENTIFIER = FSG     US Equity
>             BB_ISSUED = TIMESTAMP '2013-11-11 00:00:00.000000'
>          BB_NUMFIELDS = 4
>              BB_RCODE = 0
>              BB_SECID = FSG
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 60000
>            BB_UPDATED = TIMESTAMP '2013-11-11 00:00:00.000000'
>            PRIMARYKEY = X'e40f266d52816cdec0a80146'
>               VERSION = NULL


last known price
/Marketocracy/bin/dbtool lookup stock FSG
>>>> dbtool started at 2015-12-13 13:51:37 -0500
stock: FSG
  PK       : [F26B094F4D66EBE5C0A80146]
  companyID: [20121]
  symbol   : [FSG]
  name     : [FactorShares 2X: Gold Bull/S&P500 Bear]
  date     : [2011-02-24 00:00:00]
  status   : [Active]
stock: FSG
  PK       : [F26B094F4D66EBE5C0A80146]
  companyID: [20121]
  symbol   : [FSG]
  name     : [FactorShares 2X: Gold Bull/S&P500 Bear]
  date     : [2011-10-17 00:00:00]
  status   : [Active]
<<<< dbtool finished at 2015-12-13 13:51:38 -0500


/Marketocracy/bin/StockPriceFileChecker priceRunForCompanyID 20121
2011-11-07 (Mon) [3962]: O:35.6599 H:36.5488 L:35.4300 C:35.9400 V:99562 TSO:0 A:35.9400 R:1.0000 CA:0.0000
2011-11-08 (Tue) [3963]: O:35.3300 H:36.1700 L:34.4200 C:34.4700 V:98144 TSO:0 A:34.4700 R:1.0000 CA:0.0000
2011-11-09 (Wed) [3964]: O:36.2100 H:37.0800 L:36.1700 C:36.5700 V:108304 TSO:0 A:36.5700 R:1.0000 CA:0.0000
2011-11-10 (Thu) [3965]: O:35.6900 H:35.8145 L:35.0700 C:35.5200 V:112844 TSO:0 A:35.5200 R:1.0000 CA:0.0000
2011-11-11 (Fri) [3966]: O:34.9799 H:35.3900 L:34.6599 C:35.2700 V:61722 TSO:0 A:35.2700 R:1.0000 CA:0.0000
2011-11-12 (Sat) [3967]: <WEEKEND>
2011-11-13 (Sun) [3968]: <WEEKEND>
2011-11-14 (Mon) [3969]: O:35.4500 H:35.8600 L:35.2100 C:35.6500 V:47672 TSO:0 A:35.6500 R:1.0000 CA:0.0000
2011-11-15 (Tue) [3970]: O:35.8500 H:35.8500 L:35.0900 C:35.3100 V:51080 TSO:0 A:35.3100 R:1.0000 CA:0.0000
...
2013-11-15 (Fri) [4701]: O:5.6600 H:5.7400 L:5.6500 C:5.6600 V:2020 TSO:0 A:5.6600 R:1.0000 CA:0.0000
2013-11-16 (Sat) [4702]: <WEEKEND>
2013-11-17 (Sun) [4703]: <WEEKEND>
2013-11-18 (Mon) [4704]: O:5.6000 H:5.6000 L:5.3000 C:5.5000 V:6105 TSO:0 A:5.5000 R:1.0000 CA:0.0000
2013-11-19 (Tue) [4705]: O:5.6000 H:5.6000 L:5.3000 C:5.5000 V:6105 TSO:0 A:5.5000 R:1.0000 CA:0.0000
2013-11-20 (Wed) [4706]: O:5.5200 H:5.5600 L:5.0300 C:5.2300 V:5010 TSO:0 A:5.2300 R:1.0000 CA:0.0000
2013-11-21 (Thu) [4707]: O:5.2000 H:5.5500 L:5.0200 C:5.5500 V:2335 TSO:0 A:5.5500 R:1.0000 CA:0.0000

missing prices from earlier in the year for 2011

let's see what the other one had 
> FSG 2:
>   STOCKKEY = X'f2a8094f4d66ebfbc0a80146'
list date:  2011-02-24   - same as FSG-1
mtickets:  110 all member generated 
COMPANYID = 20135

/Marketocracy/bin/StockPriceFileChecker priceRunForCompanyID 20135
2011-02-24 (Thu) [3706]: O:24.9600 H:25.1400 L:24.8299 C:25.1400 V:1700 TSO:0 A:25.1400 R:1.0000 CA:0.0000
2011-02-25 (Fri) [3707]: O:24.1000 H:24.2300 L:24.1000 C:24.1600 V:1200 TSO:0 A:24.1600 R:1.0000 CA:0.0000
2011-02-26 (Sat) [3708]: <WEEKEND>
2011-02-27 (Sun) [3709]: <WEEKEND>
2011-02-28 (Mon) [3710]: O:47.2400 H:24.1570 L:23.8399 C:24.0000 V:3740 TSO:0 A:24.0000 R:1.0000 CA:0.0000
2011-03-01 (Tue) [3711]: O:23.9899 H:25.3900 L:23.9899 C:25.3900 V:1900 TSO:0 A:25.3900 R:1.0000 CA:0.0000
2011-03-02 (Wed) [3712]: O:25.3900 H:25.6300 L:25.1200 C:25.3799 V:209100 TSO:0 A:25.3799 R:1.0000 CA:0.0000
2011-03-03 (Thu) [3713]: O:24.5100 H:24.5100 L:23.7900 C:23.7900 V:7300 TSO:0 A:23.7900 R:1.0000 CA:0.0000
2011-03-04 (Fri) [3714]: O:24.2200 H:24.9600 L:24.2200 C:24.5900 V:19200 TSO:0 A:24.5900 R:1.0000 CA:0.0000
2011-03-05 (Sat) [3715]: <WEEKEND>
2011-03-06 (Sun) [3716]: <WEEKEND>
2011-03-07 (Mon) [3717]: O:24.6700 H:25.4200 L:24.5600 C:25.1400 V:21590 TSO:0 A:25.1400 R:1.0000 CA:0.0000
2011-03-08 (Tue) [3718]: O:25.0299 H:25.1000 L:24.3500 C:24.4300 V:48720 TSO:0 A:24.4300 R:1.0000 CA:0.0000
2011-03-09 (Wed) [3719]: O:24.8400 H:24.9200 L:24.5100 C:24.6901 V:28407 TSO:0 A:24.6901 R:1.0000 CA:0.0000
2011-03-10 (Thu) [3720]: O:24.7800 H:25.0100 L:24.3800 C:24.8299 V:48696 TSO:0 A:24.8299 R:1.0000 CA:0.0000
...

2011-10-30 (Sun) [3954]: <WEEKEND>
2011-10-31 (Mon) [3955]: O:32.7400 H:33.3200 L:32.5100 C:33.3200 V:59103 TSO:0 A:33.3200 R:1.0000 CA:0.0000
2011-11-01 (Tue) [3956]: O:34.0000 H:35.3536 L:33.8400 C:35.3536 V:235647 TSO:0 A:35.3536 R:1.0000 CA:0.0000
2011-11-02 (Wed) [3957]: O:34.7400 H:35.2800 L:34.6700 C:34.8650 V:112419 TSO:0 A:34.8650 R:1.0000 CA:0.0000
2011-11-03 (Thu) [3958]: O:35.0400 H:35.7299 L:34.5300 C:34.6300 V:114114 TSO:0 A:34.6300 R:1.0000 CA:0.0000
2011-11-04 (Fri) [3959]: O:34.9300 H:35.3800 L:34.7600 C:34.7700 V:100390 TSO:0 A:34.7700 R:1.0000 CA:0.0000

COMPANYID = 20135 which is the one we remove
prices from  2011-02-24 (Thu) [3706] to 2011-11-04 (Fri) [3959]

COMPANYID = 20121 which is the one we kept 
prices from  2011-11-07 (Mon) [3962]  to 2013-11-21 (Thu) [4707]

merge all prices together into 20121 which is the one we want to keep, there is no overlap
update stockprices set companyid=20121  where companyid = 20135;

let's check the database
select min(daynumber) from stockprices where companyID=20121;
> Row 1:
>   _C001 = 3706
select max(daynumber) from stockprices where companyID=20121;
> Row 1:
>   _C001 = 4707

good we have the entire range

let's reprice from the last day of 20121 before the update
2011-11-04 (Fri) [3959]: O:34.9300 H:35.3800 L:34.7600 C:34.7700 V:100390 TSO:0 A:34.7700 R:1.0000 CA:0.0000


1.  Go to stocks   ssh build@stocks

2. Invalidate prices from 7/1/2010    set the date up in the format yyyy-mm-dd
/Marketocracy/bin/StockPriceBuilder invalidate 2011-11-04
	** note nothing is returned, it take a few seconds to run

3. To check to see if the command worked, do a cat on the log  with today's date  2015-06-05

cat /Marketocracy/Logs/StockPriceBuilder.2015-12-13
D: (14:55:24.184) Invalidate all prices >= 2011-11-04 (3959)


alternate, can look up prices on xignite:
https://www.xignite.com/product/XigniteGlobalHistorical/api/GetGlobalHistoricalQuotesRange/

login credentials
jeff.saunders@marketocracy.com	KfabyZcbE3

check the mtickets, look for the last filled one (with shares)
select * from mticket where stockkey=X'f26b094f4d66ebe5c0a80146' and shares > 0 order by closed; 
>      ACTIONKEY = X'70563ca1391e0270c0a8015c'
>      BROKERKEY = X'2916149b39cd02dbc0a80117'
>         CLOSED = TIMESTAMP '2013-11-20 15:32:00.000000'
>        COMMENT = 
>     COMMISSION = 23.500000
>   CURRENTORDER = X'66e92fdf528cc5afc0a80135'
>        LIFEKEY = X'70923ca1391e0272c0a8015c'
>           LOCK = 0
>     MANAGERKEY = X'65862fdf528cc4a2c0a80135'
>       MODIFIED = NULL
>            NET = 2526.735040
>         OPENED = TIMESTAMP '2013-11-20 09:22:39.000000'
>          PRICE = 5.376032
>     PRIMARYKEY = X'66e72fdf528cc5afc0a80135'
>         SECFEE = 0.000000
>         SHARES = 470.000000
>      STATUSKEY = X'708f3ca1391e0272c0a8015c'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>      SOURCEKEY = NULL
>    NOTIFYEMAIL = NULL



look for shorts in member's active, long funds
select fundkey from mposition where stockkey=X'f26b094f4d66ebe5c0a80146'  and totalshares < 0;
no shorts
if there are some, then do this
select active, kindkey, primarykey, symbol from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'f26b094f4d66ebe5c0a80146'  and totalshares < 0);
no shorts

now get the login names based on stockkey - fill in the stockkey
select loginname from mmanager where primarykey in (select managerkey from mportfolio where primarykey in (select portfoliokey from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'f26b094f4d66ebe5c0a80146'  and totalshares < 0)));

apply the acquis
DELIST:  2013-11-22
there are 22 members who hold this stock
quantum:  NOTE: This security is no longer trading as of 11/22/13
last ticket: 2013-11-20   2013-11-20 
last price:   2013-11-21 (Thu) [4707]: O:5.2000 H:5.5500 L:5.0200 C:5.5500 V:2335 TSO:0 A:5.5500 R:1.0000 CA:0.0000

goign with 20131121 5.55

/Marketocracy/bin/cahelper -symbol  FSG  -effective 20131121 -type ACQUIS -exchange UN -acqType 1 -acqCash 5.55 -acqShare 0 -purchaser FSG   >& /Users/build/caout/FSG.20151213-DELIST.out 
FSG.20151213-DELIST.out
stocks1:~/caout build$ tail -f FSG.20151213-DELIST.out
D: (12-13 15:12:05.426) Install Tiger valueForKey: hack for NSArray and NSSet
D: (12-13 15:13:05.159) cahelper started on 2015-12-13 15:13:05 -0500

D: (12-13 15:13:05.485) There are [0] open tickets for FSG on 20131121
D: (12-13 15:13:05.845) StockFileLoad Version:4.0
D: (12-13 15:13:05.846) Loading Stock Data
D: (12-13 15:14:46.367) Building Lookup Index
D: (12-13 15:15:00.474) Finished Building Index
D: (12-13 15:15:10.700) Finished Loading Stock Data
D: (12-13 15:15:10.855) Connection to 192.168.111.172:6666 succeeded
D: (12-13 15:15:11.916) {
    "ACQUIRED_STOCK" = FSG; 
    "ACQUIRING_STOCK" = "FSG_FIX"; 
    AMOUNT = 5.55; 
    APPLIED = 1; 
    DATE = 20131121; 
    NOTES = " "; 
    PAYOUT = "CASH PER SHARE"; 
    SYMBOL = "FSG_FIX"; 
    "TRANSACTION_TYPE" = REGULAR; 
    TYPE = ACQUIS; 
}
D: (12-13 15:15:15.290) SUCCESS
D: (12-13 15:15:15.290) cahelper finished 2015-12-13 15:15:15 -0500
Check the results 
select * from mstockalias where stockkey= X'f26b094f4d66ebe5c0a80146'  order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-02-24 00:00:00.000000'
>    EXCHANGEKEY = X'9d5b2f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'f26c094f4d66ebe5c0a80146'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2011-10-17 00:00:00.000000'
>    EXCHANGEKEY = X'9d592f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'243a33d94eb47581c0a8013c'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 3:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2013-11-21 00:00:00.000000'
>    EXCHANGEKEY = X'9d592f1d390a440bc0a8015c'
>           NAME = FactorShares 2X: Gold Bull/S&P500 Bear
>     PRIMARYKEY = X'a2292b34566dd151c0a86fab'
>       STOCKKEY = X'f26b094f4d66ebe5c0a80146'
>         SYMBOL = FSG
>      STATUSKEY = X'6347039339e7e927c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

select * from mcorporateaction where aliaskey =X'a2292b34566dd151c0a86fab' ;
> Row 1:
>              ALIASKEY = X'a2292b34566dd151c0a86fab'
>   BB_ACTIONDICTIONARY = CP_FLAG|1|CP_TKR|FSG  US|CP_NAME| |CP_ID_BB_COMP|7228015|CP_UNIT|N.A.|CP_TOT_AMT|N.A.|CP_TYP|1|CP_CASH|5.550000|CP_CASH_FLAG|1|CP_SH|0.000000|CP_SH_FLAG|N.A.|CP_DEBT|N.A.|CP_DEBT_FLAG|N.A.|CP_STAT|3|CP_DT_FLAG|0|CP_INIT_OFFER_PREMIUM|N.A.|CP_CUR_PREM|0.000000|CP_PCT_OWNED|N.A.|CP_PCT_SOUGHT|100.000000|CP_ACCT_METHOD|0|CP_UNSOLICITED|9|CP_DETAIL_FLAG|0|CP_CRNCY|USD|CP_CASH_VAL|0.000000|CP_ARBITRAGE_PROF|N.A.|CP_CUR_TOT_VAL|0.000000|CP_ADVISORS_NUM|0|CP_ADVISORS|N.A.|CP_NOTES| |
>         BB_ACTIONFLAG = 0
>           BB_ACTIONID = 20151213:031305
>     BB_ACTIONMNEMONIC = ACQUIS
>          BB_COMPANYID = 0
>        BB_COMPANYNAME = 0
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2013-11-21 00:00:00.000000'
>         BB_IDENTIFIER = FSG_FIX     UN Equity
>             BB_ISSUED = TIMESTAMP '2013-11-21 00:00:00.000000'
>          BB_NUMFIELDS = NULL
>              BB_RCODE = 0
>              BB_SECID = FSG_FIX
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 0
>            BB_UPDATED = TIMESTAMP '2013-11-21 00:00:00.000000'
>            PRIMARYKEY = X'a2232b34566dd151c0a86fab'
>               VERSION = NULL

select count(*) from mticket where sourcekey = X'a2232b34566dd151c0a86fab';
> Row 1:
>   _C001 = 43.000000
select distinct fundkey from mposition where primarykey in (select positionkey from mtrade where ticketkey in (select primarykey from mticket where sourcekey = X'a2232b34566dd151c0a86fab'));
there are 43 fundkeys, save to CA issues FSG fundkeys acquis.txt

For Beta case
FSG no longer trades but is still active on our site - need to delist 

check on 12/15/15   invalidate funds
check MAdmin 

invalidate reprice and close 

check the one member
6D4556364DEB261AC0A80134, MMF2, melendezmw, 1570

LEDGER
Date	Start	Change	End	Type
Aug 08, 2011		1570	1570	Buy
Nov 21, 2013	1570	-1570		Corporate Action
Total: 0
 	 	
BUYS
Close Date	Quantity	Commission	Net	Price
Aug 8, 2011	1,570	$78.50	$66,048.36	$42.07
 	 	 
SELLS
You have no sells for this position

he has all one stock now

FSG
12/15/15
MAdmin is clear 
invalidate and reprice 
FSG has been acquired	right curve
 	 	
FactorShares 2X: Gold Bull/S&P500 Bear acquired by a private company on 2013-11-21 00:00:00.
 	 	 
closing




