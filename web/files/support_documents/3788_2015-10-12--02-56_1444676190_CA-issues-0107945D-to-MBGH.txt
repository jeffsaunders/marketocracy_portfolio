
date:  
ticker:  

yahoo:

quantum:

oursite:
Symbol: 0107945D	Name: Marlborough Software Developm	Price: $0.00
Volume:	Sector: Unclassified	Change:
Short Volume:	Style: Unclassified Market Cap : Unclassified Style	Market Cap:
Avg Volume:	 Exchange: NASDAQ	Today: 0.00%
50 Day Ave:	Year High:	High:
200 Day Ave:	Year Low:	Low:
CAs

Xignite:
http://192.168.111.213/feed/stockLookup.php?symbol=EYES

check MAdmin
Stock:Marlborough Software Developm  Symbol:0107945D
Date: 10/11/2015

61 users found

1	achampagne	agolabek	babdul	bchatraw	billyburto	boyplunger	briangillespie	brianmac	brucebrown	camqtr
2	cbright	ccmgodfrey	darabian	dleid	erk183	etgil9	eziedrich	fgirouard	fmoslehi	friarstale
3	gator101	ggetthere	hans4ecb	hedgstrat	jdemosthenes	jherek7	jmo1911	john97	jristheone	jyu
4	kchamblee	leb1981	leiferoo	levmatics	mebear	mlaster	moneyshowdigest	mostrange	mtalisman	nchaviano
5	pamplona	pburke	pnormanb	pwallick	redwine	rickster	rmarques	rosexu	royaloil	rserrell
6	samko	san	silentsn	sruiz	steve14	takinthestreet	tas	tessio	thewood	trukat
7	wpurnell	 	 	 	 	 	 	 	 	 



database
select distinct stockkey from mstockalias where symbol= '0107945D';  
> Row 1:
>   STOCKKEY = X'ddbb154f4f6272c5c0a80146'
select * from mstockalias where stockkey=X'ddbb154f4f6272c5c0a80146'     order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'9d5d2f1d390a440bc0a8015c'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

select count(*) from mticket where STOCKKEY = X'ddbb154f4f6272c5c0a80146';
> Row 1:
>   _C001 = 101.000000
select distinct sourcekey from mticket where STOCKKEY = X'ddbb154f4f6272c5c0a80146';
> Row 1:
>   SOURCEKEY = X'cb2a39384f611d04c0a80146'
	select count(*) from mticket where STOCKKEY = X'ddbb154f4f6272c5c0a80146' and SOURCEKEY = X'cb2a39384f611d04c0a80146';
> Row 1:
>   _C001 = 98.000000   <---- tickets generated by the spin off action

> Row 2:
>   SOURCEKEY = NULL
	select count(*) from mticket where STOCKKEY = X'ddbb154f4f6272c5c0a80146' and SOURCEKEY is null;
	> Row 1:
	>   _C001 = 3.000000
select * from mticket where STOCKKEY = X'ddbb154f4f6272c5c0a80146' and SOURCEKEY is null;
Here are the three member generated tickets for 0107945D
*******************
> Row 1:    ticket 1
*******************
>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
>      BROKERKEY = X'2916149b39cd02dbc0a80117'
>         CLOSED = TIMESTAMP '2014-02-03 16:03:04.000000'
>        COMMENT = 
>     COMMISSION = 0.000000
>   CURRENTORDER = X'98b00c6152efc4cac0a86f98'
>        LIFEKEY = X'70923ca1391e0272c0a8015c'
>           LOCK = 0
>     MANAGERKEY = X'fcd01a343f6b1c20c0a80134'
>       MODIFIED = NULL
>            NET = 0.000000
>         OPENED = TIMESTAMP '2014-02-03 11:33:14.000000'
>          PRICE = 0.000000
>     PRIMARYKEY = X'98ae0c6152efc4cac0a86f98'
>         SECFEE = 0.000000
>         SHARES = 0.000000
>      STATUSKEY = X'708f3ca1391e0272c0a8015c'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>      SOURCEKEY = NULL
>    NOTIFYEMAIL = NULL
	select * from morder where ticketkey=X'98ae0c6152efc4cac0a86f98';
	> Row 1:
	>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
	>          PRICE = NULL
	>     PRIMARYKEY = X'98b00c6152efc4cac0a86f98'
	>         SHARES = 6580.000000
	>      TICKETKEY = X'98ae0c6152efc4cac0a86f98'
	>           TIME = TIMESTAMP '2014-02-03 11:33:14.000000'
	>   AVERAGEPRICE = 0.000000
	>   SHARESFILLED = 0
	6580 shares no limit price
	select * from mtrade where ticketkey=X'98ae0c6152efc4cac0a86f98';  nothing
	select * from mticketallocation where ticketkey=X'98ae0c6152efc4cac0a86f98';
> Row 1:
>      FUNDKEY = X'3d0912484905d655c0a80135'
>   PRIMARYKEY = X'98b10c6152efc4cac0a86f98'
>       SHARES = 6580.000000
>    TICKETKEY = X'98ae0c6152efc4cac0a86f98'

ticket 1 details
	select loginname from mmanager where primarykey=X'fcd01a343f6b1c20c0a80134';
> Row 1:
>   LOGINNAME = jristheone
	select symbol from mfund where primarykey=X'3d0912484905d655c0a80135';
> Row 1:
>   SYMBOL = A
ticket date:  2014-02-03

Member jristheone fund A tried to sell 6580 shares of 0107945D on 20140230 at the market
your holdings of 0107945D	right curve
 	 	
Fund	Shares	Value	Portion of fund
JR	0	N/A	N/A
CG	7,411	$.00	0.00%
PIG	0	N/A	N/A
R	0	N/A	N/A
PB	620	$.00	0.00%
JMF	0	N/A	N/A
LOL	0	N/A	N/A
NIN	4,587	$.00	0.00%
A08	8,384	$.00	0.00%
A	6,580	$.00	0.00%  <--- there it is 



*******************
> Row 2:   ticket 2 
*******************
>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
>      BROKERKEY = X'2916149b39cd02dbc0a80117'
>         CLOSED = TIMESTAMP '2014-02-03 16:02:50.000000'
>        COMMENT = 
>     COMMISSION = 0.000000
>   CURRENTORDER = X'bcec0c6152efc692c0a86f98'
>        LIFEKEY = X'70923ca1391e0272c0a8015c'
>           LOCK = 0
>     MANAGERKEY = X'fcd01a343f6b1c20c0a80134'
>       MODIFIED = NULL
>            NET = 0.000000
>         OPENED = TIMESTAMP '2014-02-03 11:40:50.000000'
>          PRICE = 0.000000
>     PRIMARYKEY = X'bcea0c6152efc692c0a86f98'
>         SECFEE = 0.000000
>         SHARES = 0.000000
>      STATUSKEY = X'708f3ca1391e0272c0a8015c'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>      SOURCEKEY = NULL
>    NOTIFYEMAIL = NULL
	select * from morder where ticketkey=X'bcea0c6152efc692c0a86f98';
> Row 1:
>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
>          PRICE = NULL
>     PRIMARYKEY = X'bcec0c6152efc692c0a86f98'
>         SHARES = 4587.000000
>      TICKETKEY = X'bcea0c6152efc692c0a86f98'
>           TIME = TIMESTAMP '2014-02-03 11:40:50.000000'
>   AVERAGEPRICE = 0.000000
>   SHARESFILLED = 0
	select * from mtrade where ticketkey=X'bcea0c6152efc692c0a86f98';
nothing
	select * from mticketallocation where ticketkey=X'bcea0c6152efc692c0a86f98';
> Row 1:
>      FUNDKEY = X'218d5eaf48ecce4fc0a80132'
>   PRIMARYKEY = X'bced0c6152efc692c0a86f98'
>       SHARES = 4587.000000
>    TICKETKEY = X'bcea0c6152efc692c0a86f98'

ticket 2 details
select loginname from mmanager where primarykey=X'fcd01a343f6b1c20c0a80134';
> Row 1:
>   LOGINNAME = jristheone
select symbol from mfund where primarykey=X'218d5eaf48ecce4fc0a80132';
> Row 1:
>   SYMBOL = NIN
Member jristheone fund NIN tried to sell 4587 shares of 0107945D on 20140230 at the market
your holdings of 0107945D	right curve
 	 	
Fund	Shares	Value	Portion of fund
JR	0	N/A	N/A
CG	7,411	$.00	0.00%
PIG	0	N/A	N/A
R	0	N/A	N/A
PB	620	$.00	0.00%
JMF	0	N/A	N/A
LOL	0	N/A	N/A
NIN	4,587	$.00	0.00%  <--- there it is
A08	8,384	$.00	0.00%
A	6,580	$.00	0.00%   

*******************
> Row 3:   ticket 3 
*******************
>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
>      BROKERKEY = X'2916149b39cd02dbc0a80117'
>         CLOSED = TIMESTAMP '2014-07-30 16:01:02.000000'
>        COMMENT = 
>     COMMISSION = 0.000000
>   CURRENTORDER = X'4a571dcc53d8fac5c0a86f98'
>        LIFEKEY = X'70923ca1391e0272c0a8015c'
>           LOCK = 0
>     MANAGERKEY = X'fcd01a343f6b1c20c0a80134'
>       MODIFIED = NULL
>            NET = 0.000000
>         OPENED = TIMESTAMP '2014-07-30 10:01:41.000000'
>          PRICE = 0.000000
>     PRIMARYKEY = X'4a551dcc53d8fac5c0a86f98'
>         SECFEE = 0.000000
>         SHARES = 0.000000
>      STATUSKEY = X'708f3ca1391e0272c0a8015c'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>      SOURCEKEY = NULL
>    NOTIFYEMAIL = NULL
	select * from morder where ticketkey=X'4a551dcc53d8fac5c0a86f98';
> Row 1:
>      ACTIONKEY = X'70593ca1391e0270c0a8015c'
>          PRICE = NULL
>     PRIMARYKEY = X'4a571dcc53d8fac5c0a86f98'
>         SHARES = 6580.000000
>      TICKETKEY = X'4a551dcc53d8fac5c0a86f98'
>           TIME = TIMESTAMP '2014-07-30 10:01:41.000000'
>   AVERAGEPRICE = 0.000000
>   SHARESFILLED = 0

	select * from mtrade where ticketkey=X'4a551dcc53d8fac5c0a86f98';
nothing
	select * from mticketallocation where ticketkey=X'4a551dcc53d8fac5c0a86f98';
> Row 1:
>      FUNDKEY = X'3d0912484905d655c0a80135'
>   PRIMARYKEY = X'4a581dcc53d8fac5c0a86f98'
>       SHARES = 6580.000000
>    TICKETKEY = X'4a551dcc53d8fac5c0a86f98'
ticket 3 details
select loginname from mmanager where primarykey=X'fcd01a343f6b1c20c0a80134';
> Row 1:
>   LOGINNAME = jristheone
select symbol from mfund where primarykey=X'3d0912484905d655c0a80135';
> Row 1:
>   SYMBOL = A

member  jristheone fund A tried a second time to sell 6580 of 0107945D on 20140730 at the market
this one is a duplicate of ticket 1



select * from mcorporateaction where primarykey=X'cb2a39384f611d04c0a80146';
> Row 1:
>              ALIASKEY = X'd7ae06793e602339c0a80146'
>   BB_ACTIONDICTIONARY = CP_SPINOFF_NAME|Marlborough Software Developm|CP_ID_BB_COMP|28618374|CP_ID_BB_SEC|1000|CP_TERMS|1 per 1|CP_RATIO|1.000000|CP_PAY_DT|20120314|CP_RECORD_DT|20120308|CP_COST|N.A.|CP_CRNCY|USD|CP_ADJ|1.000000|CP_ADJ_DT|20120315|CP_TKR|0107945D US|CP_DUE_BILL_RED_DT|20120319|CP_SH_FRACTIONAL|N.A.|CP_TERMS_FLAG|1|CP_INDICATOR|N|CP_NOTES|N.A.
>         BB_ACTIONFLAG = U
>           BB_ACTIONID = 59952034
>     BB_ACTIONMNEMONIC = SPIN
>          BB_COMPANYID = 194558
>        BB_COMPANYNAME = Bitstream Inc
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2012-03-15 00:00:00.000000'
>         BB_IDENTIFIER = BITS    US Equity
>             BB_ISSUED = TIMESTAMP '2011-11-10 00:00:00.000000'
>          BB_NUMFIELDS = 17
>              BB_RCODE = 0
>              BB_SECID = BITS
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 1000
>            BB_UPDATED = TIMESTAMP '2012-03-14 00:00:00.000000'
>            PRIMARYKEY = X'cb2a39384f611d04c0a80146'
>               VERSION = NULL

BITS spun off 0107945D 1 for 1  CP_PAY_DT|20120314
CAs for BITS
BITS has been acquired	right curve
 	 	
BITSTREAM INC [BITS] acquired by Monotype Imaging Holdings, Incorporated [TYPE] on 2012-03-20 00:00:00.
 	 	[ Go to TYPE ]
 	 	 
left curve	  listing changes for BITS	right curve
 	 	
Effective Date	Old Exchange	Old Cod	New Exchange	New Code	Description
Feb 28, 2003	NASDAQ	UQ	NASDAQ-SMALLCAP	UR	Change in the exchange that BITS trades on from NASDAQ to NASDAQ-SMALLCAP
Feb 28, 2003	NASDAQ	UQ	NASDAQ-SMALLCAP	UR	Change in the exchange that BITS trades on from NASDAQ to NASDAQ-SMALLCAP
 	 	 
left curve	  spinoffs by BITS	right curve
 	 	
Effective Date	Record Date	Pay Date	Terms	Symbol	Description
15 Mar 12	08 Mar 12	14 Mar 12	1 per 1	0107945D	0107945D US spun off from BITS with terms:1 per 1

search on the company name 
http://www.marketwatch.com/story/marlborough-software-development-holdings-inc-agrees-to-merge-with-pageflex-acquisitions-inc-2013-08-20
MARLBOROUGH, Mass., Aug 20, 2013 (BUSINESS WIRE) -- Marlborough Software Development Holdings Inc. ("MSDH" or the "Company") MBGH today announced that it has entered into a definitive agreement to merge MSDH with Pageflex Acquisitions Inc. ("Pageflex") in a cash merger in which shareholders of MSDH will receive $0.091 per share of Common Stock. Pursuant to the merger Pageflex shall merge with and into MSDH, the separate corporate existence of Pageflex shall cease and MSDH shall be the surviving corporation of the merger and will change its name to Pageflex Inc. Amos Kaminski, a director of MSDH, Pinhas Romik, MSDH's chief executive officer and Elly Perets, MSDH's vice president of sales and marketing, each own approximately 45.5%, 9.1% and 4.6% of the currently issued and outstanding equity of Pageflex, respectively.

Ok, it looks like Marlborough software has the ticker MBGH

check for unapplied CAs in the database

select * from mcorporateaction where aliaskey is null and BB_SECID='0107945D'  order by BB_EFFECTIVE;
nothing
Marlborough Software Development Holdings Inc

Assessment:
BITS spun off 0107945D  pay date 2012-03-14  this is Marlborough Software  ratio 1 to 1
there should have been a ticker change, I believe to MBGH

MBGH exists on our site as Marlborough Software and was acquired in the real world but still exists on our site,
need to acquire this, too.

Let's look up MBGH history
select distinct stockkey from mstockalias where symbol='MBGH';
> Row 1:
>   STOCKKEY = X'c6734c024f67b626c0a80146'
select * from mstockalias where STOCKKEY = X'c6734c024f67b626c0a80146' order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Development Holdings Inc
>     PRIMARYKEY = X'c6744c024f67b626c0a80146'
>       STOCKKEY = X'c6734c024f67b626c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 45103010
>       STYLEKEY = UU
	select * from mcorporateaction where aliaskey=X'c6744c024f67b626c0a80146';
	> Row 1:
	>              ALIASKEY = X'c6744c024f67b626c0a80146'
	>   BB_ACTIONDICTIONARY = CP_EXCH|UU|CP_TKR|MBGH|CP_SEC_TYP|1|CP_NOTES|N.A.
	>         BB_ACTIONFLAG = N
	>           BB_ACTIONID = 62588938
	>     BB_ACTIONMNEMONIC = LIST
	>          BB_COMPANYID = 28618374
	>        BB_COMPANYNAME = Marlborough Software Development Holdings Inc
	>           BB_CURRENCY = USD
	>          BB_EFFECTIVE = TIMESTAMP '2012-03-19 00:00:00.000000'
	>         BB_IDENTIFIER = MBGH    US Equity
	>             BB_ISSUED = TIMESTAMP '2012-03-16 00:00:00.000000'
	>          BB_NUMFIELDS = 4
	>              BB_RCODE = 0
	>              BB_SECID = MBGH
	>          BB_SECIDTYPE = TKR
	>         BB_SECURITYID = 1000
	>            BB_UPDATED = TIMESTAMP '2012-03-16 00:00:00.000000'
	>            PRIMARYKEY = X'3e58551e4f63c107c0a80146'
	>               VERSION = NULL

> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-07-23 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Development Holdings Inc
>     PRIMARYKEY = X'ab0f597e500ddee3c0a80146'
>       STOCKKEY = X'c6734c024f67b626c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 45103010
>       STYLEKEY = UU
	select * from mcorporateaction where aliaskey=X'ab0f597e500ddee3c0a80146';
	> Row 1:
	>              ALIASKEY = X'ab0f597e500ddee3c0a80146'
	>   BB_ACTIONDICTIONARY = CP_OLD_EXCH|UU|CP_NEW_EXCH|UV|CP_NOTES|N.A.
	>         BB_ACTIONFLAG = N
	>           BB_ACTIONID = 66652930
	>     BB_ACTIONMNEMONIC = CHG_LIST
	>          BB_COMPANYID = 28618374
	>        BB_COMPANYNAME = Marlborough Software Development Holdings Inc
	>           BB_CURRENCY = USD
	>          BB_EFFECTIVE = TIMESTAMP '2012-07-23 00:00:00.000000'
	>         BB_IDENTIFIER = MBGH    US Equity
	>             BB_ISSUED = TIMESTAMP '2012-07-23 00:00:00.000000'
	>          BB_NUMFIELDS = 3
	>              BB_RCODE = 0
	>              BB_SECID = MBGH
	>          BB_SECIDTYPE = TKR
	>         BB_SECURITYID = 1000
	>            BB_UPDATED = TIMESTAMP '2012-07-23 00:00:00.000000'
	>            PRIMARYKEY = X'9c374818500ddc4ac0a80146'
	>               VERSION = NULL

anyone hold MBGH?
select count(*) from mticket where stockkey=X'ab0f597e500ddee3c0a80146';
no one.

So MBGH listed on 2012-03-19
when did 0107945D come into existence via the spin from BITS?   20120314

I think we can delete MBGH altogether, then do a ticker change for 0107945D to MBGH on 2012-03-19

what exchange is 0107945D on?    NASDAQ

dtc deletes MBGH
DELETE
571038108  <--- this is the cusip for MBGH
MBGH
MARLBOROUGH SOFTWARE DEVELOPMENT HOLDINGS INC COMMON STOCK
12/10/2013

********************************************************************
Action plan and assessment
********************************************************************

1.  BITS spun off 0107945D  on a 1 to 1 ration on 2012-03-14.   This is Marlborough software
98 tickets were generated as a result of this spin off.    This ticker never traded, however, the company is real
There are also three member generated tickets where member jristheone tries to sell his shares.  The orders expire because
there is no market for this ticket.     update:  the dates for these tickets is after the date when this stock delisted.

	select * from mexchange where primarykey in  (select exchangekey from mstockalias where symbol='0107945D');
> Row 1:
>   ADDRESSKEY = NULL
>    FEEDDELAY = 15
>         NAME = NASDAQ
>   PRIMARYKEY = X'9d5d2f1d390a440bc0a8015c'
so 0107945D started off on the nasdaq, let's change that to OTCBB
select * from mexchange;
> Row 4:
>   ADDRESSKEY = NULL
>    FEEDDELAY = 15
>         NAME = OTCBB
>   PRIMARYKEY = X'6325039339e7e926c0a801dc'

select * from mstockalias where symbol='0107945D';
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'9d5d2f1d390a440bc0a8015c'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

update mstockalias set EXCHANGEKEY=X'6325039339e7e926c0a801dc' where PRIMARYKEY = X'ddbc154f4f6272c5c0a80146';

ok we have the OTC BB as the exchange for this

Now, delete everything related to MBGH

2.  The real ticker symbol for this company is MBGH.   We listed it *from Bloomberg* on 2012-03-19.   We also processed
an exchange change on 2012-07-23   UU to UV   the CUSIP is here 571038108.   No one holds MBGH (no mtickets)

Since there are no tickets and no holders for MBGH, I am going to delete this.    Once it is deleted, I will process 
a ticker change 0107945D to MBGH on 2012-03-19, the day this ticker came into existence.    This is 5 days after the spin
off, so we're good.  

3.  We'll need to get prices from xignite for MBGH.    they go from 2012-03-19 to 2013-12-20
https://www.xignite.com/product/XigniteGlobalHistorical/api/GetGlobalHistoricalQuotesRange/

login credentials
jeff.saunders@marketocracy.com	KfabyZcbE3
got prices for MBGH    this was acquired on 2013-12-20 for 0.09  we'll need to process this as well, this stock was
acquired in the real world but is still active on our site.  

MBGH priced from 2012-03-19 to 2013-12-20   maybe we have these in stockprices ?  
this is good because the start date is the date when we'll do the ticker change.

select distinct stockkey from mstockalias where symbol='MBGH';
> Row 1:
>   STOCKKEY = X'c6734c024f67b626c0a80146'
select * from mstockalias where STOCKKEY = X'c6734c024f67b626c0a80146' order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Development Holdings Inc
>     PRIMARYKEY = X'c6744c024f67b626c0a80146'
>       STOCKKEY = X'c6734c024f67b626c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 45103010
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-07-23 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Development Holdings Inc
>     PRIMARYKEY = X'ab0f597e500ddee3c0a80146'
>       STOCKKEY = X'c6734c024f67b626c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 45103010
>       STYLEKEY = UU

	select * from mstock where primarykey=X'c6734c024f67b626c0a80146';
> Row 1:
>         IDENTITYKEY = X'ab0f597e500ddee3c0a80146'
>                NAME = NULL
>          PRIMARYKEY = X'c6734c024f67b626c0a80146'
>              SYMBOL = NULL
>           COMPANYID = 22130
>   WINDOWIDENTITYKEY = NULL

CompanyID for MBGH os 22130

get the companyID for 0107945D
select * from mstock where primarykey in (select distinct stockkey from mstockalias where symbol='0107945D');
> Row 1:
>         IDENTITYKEY = X'ddbc154f4f6272c5c0a80146'
>                NAME = NULL
>          PRIMARYKEY = X'ddbb154f4f6272c5c0a80146'
>              SYMBOL = NULL
>           COMPANYID = 22119
>   WINDOWIDENTITYKEY = NULL

CompanyID for 0107945D os 22119

let's check stockprices

for MBGH:
select * from stockprices where COMPANYID = 22130 order by daynumber;
first one:
> Row 1:
>   DAYNUMBER = 4095   <--- 3/19/12	4095	Mon  good 
>   COMPANYID = 22130
>      OPENED = 20000
>        HIGH = 20000
>         LOW = 20000
>      CLOSED = 20000
>      VOLUME = 1000
last one:
> Row 441:
>   DAYNUMBER = 4725   <---12/9/13	4725	Mon   
>   COMPANYID = 22130
>      OPENED = 700
>        HIGH = 900
>         LOW = 700
>      CLOSED = 900
>      VOLUME = 48400

we need prices through 12-20-2013  we'll use xignite

select * from stockprices where companyid= 22119;
noting nada

4.  Once this is all done, we need to add the member's tickers
two of them  
Member jristheone fund A tried to sell 6580 shares of 0107945D on 20140230 at the market
Member jristheone fund NIN tried to sell 4587 shares of 0107945D on 20140230 at the market

wait these are after MBGH closed out no need to load these



delete everything associated with MBGH
select distinct stockkey from mstockalias where symbol='MBGH';
> Row 1:
>   STOCKKEY = X'c6734c024f67b626c0a80146'

set commit false;

delete from mstock where primarykey=  X'c6734c024f67b626c0a80146'; 

delete from mwindowstock where stockkey=X'c6734c024f67b626c0a80146';  

delete from mcorporateaction where aliaskey in (select primarykey from mstockalias where stockkey=X'c6734c024f67b626c0a80146');

delete from mstockalias where stockkey=X'c6734c024f67b626c0a80146';  

delete from mtrade where positionkey in (select primarykey from mposition where stockkey=X'c6734c024f67b626c0a80146');   

delete from mposition where stockkey=X'c6734c024f67b626c0a80146'; 

delete from morder where ticketkey in (select primarykey from mticket where stockkey=X'c6734c024f67b626c0a80146');

delete from mticketallocation where ticketkey in (select primarykey from mticket where stockkey=X'c6734c024f67b626c0a80146');

delete from mticket where stockkey=X'c6734c024f67b626c0a80146';    

delete from GFSPOSITION where stockkey=X'c6734c024f67b626c0a80146';  

delete from MFUNDINDEXPOSITION where stockkey=X'c6734c024f67b626c0a80146';  

commit;

set commit true;

done no more MBGH

select distinct stockkey from mstockalias where symbol='MBGH';

ok, process the ticker change  from 0107945D to MBGH  on 2012-03-19

/Marketocracy/bin/cahelper -symbol MBGH -effective 20120319 -type CHG_TKR -exchange UU -oldSymbol 0107945D >& /Users/build/caout/0107945D.20151011-CHG_TKR-MBGH.out
D: (10-11 10:14:20.464) Install Tiger valueForKey: hack for NSArray and NSSet
D: (10-11 10:14:44.839) cahelper started on 2015-10-11 10:14:44 -0400

D: (10-11 10:14:45.161) {
    APPLIED = 1; 
    DATE = 20120319; 
    "NEW_TICKER" = "MBGH US"; 
    NOTES = "N.A."; 
    "OLD_TICKER" = "0107945D US"; 
    SYMBOL = MBGH; 
    TYPE = "CHG_TKR"; 
}
D: (10-11 10:14:45.750) SUCCESS
D: (10-11 10:14:45.750) cahelper finished 2015-10-11 10:14:45 -0400


select distinct stockkey from mstockalias where symbol='MBGH';
> Row 1:
>   STOCKKEY = X'ddbb154f4f6272c5c0a80146'
select * from mstockalias where stockkey=X'ddbb154f4f6272c5c0a80146' order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = NULL
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'a4e63cc1561a6ed5c0a86fab'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

let's add the CUSIP on the stock
update mstockalias set CUSIP='571038108'  where stockkey=X'ddbb154f4f6272c5c0a80146';

select * from mstockalias where stockkey=X'ddbb154f4f6272c5c0a80146' order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'a4e63cc1561a6ed5c0a86fab'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

ok let's add the prices
select companyid from mstock where primarykey=X'ddbb154f4f6272c5c0a80146';
> Row 1:
>   COMPANYID = 22119
need to set up a template then add the prices   there are currently no prices in the database for this one
so we can use insert 

here are the Yahoo finance column headings
Date	Open	High	Low	Close	Volume	Adj Close*

CA issues MBGH prices to be loaded.xls
inserted these 
> Row 1:
>   _C001 = 444.000000

select min(daynumber) from stockprices where companyid = 22119 ;
> Row 1:
>   _C001 = 4095
select max(daynumber) from stockprices where companyid = 22119 ;
> Row 1:
>   _C001 = 4736

/Marketocracy/bin/StockPriceBuilder invalidate 2012-03-19
	** note nothing is returned, it take a few seconds to run

3. To check to see if the command worked, do a cat on the log  with today's date  2015-06-05

cat /Marketocracy/Logs/StockPriceBuilder.2015-10-11

D: (17:43:48.449) Invalidate all prices >= 2012-03-19 (4095)

ok now that we have MBGH  we need to acquire it













**************
last known price
/Marketocracy/bin/dbtool lookup stock MBGH
>>>> dbtool started at 2015-10-11 17:52:29 -0400
stock: MBGH
  PK       : [DDBB154F4F6272C5C0A80146]
  companyID: [22119]
  symbol   : [MBGH]
  name     : [Marlborough Software Developm]
  date     : [2012-03-19 00:00:00]
  status   : [Active]
<<<< dbtool finished at 2015-10-11 17:52:29 -0400

/Marketocracy/bin/StockPriceFileChecker priceRunForCompanyID 22119

12/20/13
select distinct stockkey from mstockalias where symbol='MBGH';
> Row 1:
>   STOCKKEY = X'ddbb154f4f6272c5c0a80146'

select * from mstockalias where stockkey=x'ddbb154f4f6272c5c0a80146';
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'a4e63cc1561a6ed5c0a86fab'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

check the mtickets, look for the last filled one (with shares)
select * from mticket where stockkey=X'ddbb154f4f6272c5c0a80146' and shares > 0 order by closed; 
nothing, no user generated trades
select count(*) from mticket where stockkey=X'ddbb154f4f6272c5c0a80146';
> Row 1:
>   _C001 = 101.000000

look for shorts in member's active, long funds
select fundkey from mposition where stockkey=X'ddbb154f4f6272c5c0a80146'  and totalshares < 0;
if there are some, then do this
select active, kindkey, primarykey, symbol from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'ddbb154f4f6272c5c0a80146'  and totalshares < 0);
no shorts 

now get the login names based on stockkey - fill in the stockkey
select loginname from mmanager where primarykey in (select managerkey from mportfolio where primarykey in (select portfoliokey from mfund where active=1 and kindkey= X'70443ca1391e026fc0a8015c' and primarykey in (select fundkey from mposition where stockkey=X'ddbb154f4f6272c5c0a80146'  and totalshares < 0)));

apply the acquis
there are 61 members who hold this stock
quantum:
last ticket:
last price:

acquired on 20131220 0.091
/Marketocracy/bin/cahelper -symbol  MBGH  -effective 20131220 -type ACQUIS -exchange UN -acqType 1 -acqCash 0.091 -acqShare 0 -purchaser MBGH   >& /Users/build/caout/MBGH.20151011-ACQUIS.out 

ChecMBGH.20151011-ACQUIS.out
stocks1:~/caout build$ tail -f MBGH.20151011-ACQUIS.out
D: (10-11 17:58:59.397) Install Tiger valueForKey: hack for NSArray and NSSet
D: (10-11 17:59:23.087) cahelper started on 2015-10-11 17:59:23 -0400

D: (10-11 17:59:23.457) There are [0] open tickets for MBGH on 20131220
D: (10-11 17:59:24.073) StockFileLoad Version:4.0
D: (10-11 17:59:24.073) Loading Stock Data
D: (10-11 18:00:00.874) Building Lookup Index
D: (10-11 18:00:06.492) Finished Building Index
D: (10-11 18:00:10.424) Finished Loading Stock Data
D: (10-11 18:00:10.610) >>> load new StockPrices file
D: (10-11 18:00:10.633) <<< load new StockPrices file
D: (10-11 18:00:10.633) >>> swap StockPrices
D: (10-11 18:00:10.633) Obtained Stockprices swap mutex
D: (10-11 18:00:10.633) <<< swap StockPrices
D: (10-11 18:00:10.634) Stock prices available from 2000-05-01 to 2015-10-09
D: (10-11 18:00:10.748) Connection to 192.168.111.172:6666 succeeded
D: (10-11 18:00:13.172) {
    "ACQUIRED_STOCK" = MBGH; 
    "ACQUIRING_STOCK" = "MBGH_FIX"; 
    AMOUNT = 0.091; 
    APPLIED = 1; 
    DATE = 20131220; 
    NOTES = " "; 
    PAYOUT = "CASH PER SHARE"; 
    SYMBOL = "MBGH_FIX"; 
    "TRANSACTION_TYPE" = REGULAR; 
    TYPE = ACQUIS; 
}
D: (10-11 18:00:27.186) SUCCESS
D: (10-11 18:00:27.187) cahelper finished 2015-10-11 18:00:27 -0400
k the results 
select * from mstockalias where stockkey= X'ddbb154f4f6272c5c0a80146'  order by "date";
> Row 1:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-15 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'ddbc154f4f6272c5c0a80146'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = 0107945D
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 2:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2012-03-19 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'a4e63cc1561a6ed5c0a86fab'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'634a039339e7e928c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU
> Row 3:
>   CAPSECTORKEY = NULL
>          CUSIP = 571038108
>           DATE = TIMESTAMP '2013-12-20 00:00:00.000000'
>    EXCHANGEKEY = X'6325039339e7e926c0a801dc'
>           NAME = Marlborough Software Developm
>     PRIMARYKEY = X'53a85986561adbbbc0a86fab'
>       STOCKKEY = X'ddbb154f4f6272c5c0a80146'
>         SYMBOL = MBGH
>      STATUSKEY = X'6347039339e7e927c0a801dc'
>      CSISYMBOL = NULL
>        GICSKEY = 00000000
>       STYLEKEY = UU

select * from mcorporateaction where aliaskey =X'53a85986561adbbbc0a86fab' ;
> Row 1:
>              ALIASKEY = X'53a85986561adbbbc0a86fab'
>   BB_ACTIONDICTIONARY = CP_FLAG|1|CP_TKR|MBGH  US|CP_NAME| |CP_ID_BB_COMP|7228015|CP_UNIT|N.A.|CP_TOT_AMT|N.A.|CP_TYP|1|CP_CASH|0.091000|CP_CASH_FLAG|1|CP_SH|0.000000|CP_SH_FLAG|N.A.|CP_DEBT|N.A.|CP_DEBT_FLAG|N.A.|CP_STAT|3|CP_DT_FLAG|0|CP_INIT_OFFER_PREMIUM|N.A.|CP_CUR_PREM|0.000000|CP_PCT_OWNED|N.A.|CP_PCT_SOUGHT|100.000000|CP_ACCT_METHOD|0|CP_UNSOLICITED|9|CP_DETAIL_FLAG|0|CP_CRNCY|USD|CP_CASH_VAL|0.000000|CP_ARBITRAGE_PROF|N.A.|CP_CUR_TOT_VAL|0.000000|CP_ADVISORS_NUM|0|CP_ADVISORS|N.A.|CP_NOTES| |
>         BB_ACTIONFLAG = 0
>           BB_ACTIONID = 20151011:055923
>     BB_ACTIONMNEMONIC = ACQUIS
>          BB_COMPANYID = 0
>        BB_COMPANYNAME = 0
>           BB_CURRENCY = USD
>          BB_EFFECTIVE = TIMESTAMP '2013-12-20 00:00:00.000000'
>         BB_IDENTIFIER = MBGH_FIX     UN Equity
>             BB_ISSUED = TIMESTAMP '2013-12-20 00:00:00.000000'
>          BB_NUMFIELDS = NULL
>              BB_RCODE = 0
>              BB_SECID = MBGH_FIX
>          BB_SECIDTYPE = TKR
>         BB_SECURITYID = 0
>            BB_UPDATED = TIMESTAMP '2013-12-20 00:00:00.000000'
>            PRIMARYKEY = X'53a25986561adbbbc0a86fab'
>               VERSION = NULL


select count(*) from mticket where sourcekey = X'53a25986561adbbbc0a86fab';
> Row 1:
>   _C001 = 98.000000
select distinct fundkey from mposition where primarykey in (select positionkey from mtrade where ticketkey in (select primarykey from mticket where sourcekey = X'53a25986561adbbbc0a86fab'));
there are 98 fundkeys, save to CA issues MBGH fundkeys.txt

For Beta case
0107945D spun off from BITS then became MBGH then got acquired - need to process this  

check on 10/14/15   invalidate funds
check MAdmin 




